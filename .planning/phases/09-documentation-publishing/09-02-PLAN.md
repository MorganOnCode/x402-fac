---
phase: 09-documentation-publishing
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - README.md
  - LICENSE
  - CONTRIBUTING.md
  - SECURITY.md
autonomous: true

must_haves:
  truths:
    - "A new developer can clone, configure, and run the facilitator within 30 minutes using the README"
    - "Project has Apache-2.0 license matching upstream x402 protocol"
    - "SECURITY.md provides responsible disclosure process"
    - "CONTRIBUTING.md explains dev setup and PR process"
  artifacts:
    - path: "README.md"
      provides: "Project overview, quick start, API reference, SDK usage"
      min_lines: 100
    - path: "LICENSE"
      provides: "Apache-2.0 license text"
      contains: "Apache License"
    - path: "CONTRIBUTING.md"
      provides: "Development setup, coding standards, PR process"
      min_lines: 40
    - path: "SECURITY.md"
      provides: "Vulnerability reporting process"
      contains: "Reporting a Vulnerability"
  key_links:
    - from: "README.md"
      to: "docs/architecture.md"
      via: "link to architecture docs"
      pattern: "docs/architecture"
    - from: "README.md"
      to: "CONTRIBUTING.md"
      via: "contributing link"
      pattern: "CONTRIBUTING"
---

<objective>
Create the four root-level project files: README.md (comprehensive project overview with quick start), LICENSE (Apache-2.0), CONTRIBUTING.md (dev setup and PR process), and SECURITY.md (responsible disclosure).

Purpose: These are the first files any developer or contributor sees. They establish the project's identity, usability, and governance.
Output: Four root-level files that make the project ready for open-source publication.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-documentation-publishing/09-RESEARCH.md

@package.json
@config/config.example.json
@examples/README.md
@docs/operations.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create README.md</name>
  <files>README.md</files>
  <action>
Create a comprehensive README.md at the project root following this structure:

```markdown
# x402 Cardano Payment Facilitator

> Cardano payment facilitator for the x402 protocol -- verify and settle blockchain payments for high-value operations.

[Badges placeholder -- CI, license, Node version]

## What is x402?

2-3 sentences: x402 is an HTTP-native payment protocol (HTTP 402 Payment Required). This facilitator handles the Cardano side: verifying signed transactions, settling them on-chain, and confirming payment. Resource servers use the SDK to gate access to services behind x402 payments.

## Features

- Transaction-based verification (10-check pipeline: CBOR, scheme, network, token, recipient, amount, min UTXO, witness, TTL, fee)
- On-chain settlement via Blockfrost with dedup and confirmation polling
- Multi-token support: ADA + stablecoins (USDM, DJED, iUSD)
- Resource server SDK with payment gate middleware
- Reference implementation: payment-gated file storage
- Interactive API docs (Swagger UI at /docs)
- Production-ready: rate limiting, security headers, structured logging, Docker deployment
- 383+ tests with 80%+ coverage

## Quick Start

### Prerequisites

- Node.js 20+
- pnpm (`npm install -g pnpm`)
- Docker (for Redis)
- Blockfrost API key ([blockfrost.io](https://blockfrost.io) -- free tier works)

### 1. Clone and install

```bash
git clone https://github.com/YOUR_USERNAME/x402-fac.git
cd x402-fac
pnpm install
```

### 2. Start dependencies

```bash
pnpm docker:up  # Starts Redis
```

### 3. Configure

```bash
cp config/config.example.json config/config.json
```

Edit `config/config.json`:
- Set `chain.blockfrost.projectId` to your Blockfrost preview testnet project ID
- Set `chain.facilitator.seedPhrase` to a 24-word Cardano wallet seed phrase

### 4. Start the server

```bash
pnpm dev
```

### 5. Verify

```bash
curl http://localhost:3000/health
curl http://localhost:3000/supported
```

Visit [http://localhost:3000/docs](http://localhost:3000/docs) for interactive API documentation.

## Architecture

Brief text: the facilitator sits between resource servers and the Cardano blockchain. Link to `docs/architecture.md` for diagrams.

Include a simple inline Mermaid sequence diagram showing the core x402 flow:
```
Client -> Resource Server: Request resource
Resource Server -> Client: 402 Payment Required
Client -> Client: Build & sign Cardano tx
Client -> Resource Server: Retry with Payment-Signature
Resource Server -> Facilitator: POST /verify
Resource Server -> Facilitator: POST /settle
Facilitator -> Cardano: Submit tx
Facilitator -> Resource Server: Confirmed
Resource Server -> Client: 200 OK
```

## API Reference

Table with all 7 endpoints:
| Method | Path | Description |
|--------|------|-------------|
| GET | /health | Server health and dependency status |
| GET | /supported | Supported chains, schemes, signer addresses |
| POST | /verify | Verify a signed Cardano transaction |
| POST | /settle | Submit and confirm payment on-chain |
| POST | /status | Check transaction confirmation status |
| POST | /upload | Payment-gated file upload (reference impl) |
| GET | /files/:cid | Download file by content ID (free) |

Link: "See interactive docs at `/docs` (Swagger UI) for request/response schemas and examples."

## SDK for Resource Servers

Brief code example showing FacilitatorClient and createPaymentGate usage:
```typescript
import { FacilitatorClient, createPaymentGate } from 'x402-fac/sdk';

const facilitator = new FacilitatorClient({ baseUrl: 'http://localhost:3000' });
const gate = createPaymentGate({
  facilitator,
  payTo: 'addr_test1...',
  amount: '2000000',
  network: 'cardano:preview',
});
```

Link to `examples/README.md` for a full working example.

## Deployment

Brief Docker one-liner:
```bash
docker compose --profile production up -d
```

Link to `docs/deployment.md` for full deployment guide.

## Documentation

Links:
- [Architecture & Diagrams](docs/architecture.md)
- [Deployment Guide](docs/deployment.md)
- [Operations Runbook](docs/operations.md)
- [Cardano x402 Positioning](docs/cardano-x402.md)
- [SDK Guide](docs/sdk-guide.md) -- TODO if created, otherwise omit
- [Example Client](examples/README.md)

## Contributing

Brief: "Contributions welcome! See [CONTRIBUTING.md](CONTRIBUTING.md) for development setup and PR guidelines."

## License

Apache-2.0 -- see [LICENSE](LICENSE).
```

Do NOT include real API keys, seed phrases, or secrets anywhere in the README. Use placeholders like `YOUR_USERNAME`, `your-blockfrost-project-id`.

The README should be approximately 150-200 lines. Focus on the "30-minute quick start" scenario. Don't over-explain internals -- link to docs/ for details.
  </action>
  <verify>README.md exists at project root. Contains Quick Start section with 5 steps. Contains API Reference table with 7 endpoints. Contains no real API keys or secrets.</verify>
  <done>README.md provides a clear path from clone to running server in under 30 minutes.</done>
</task>

<task type="auto">
  <name>Task 2: Create LICENSE, CONTRIBUTING.md, and SECURITY.md</name>
  <files>LICENSE, CONTRIBUTING.md, SECURITY.md</files>
  <action>
**LICENSE** -- Create Apache-2.0 license file at project root:
- Use the standard Apache License, Version 2.0 full text from https://www.apache.org/licenses/LICENSE-2.0.txt
- Copyright line: `Copyright 2026 x402-fac contributors`
- This matches the upstream x402 protocol (Coinbase x402 repo uses Apache-2.0)

**CONTRIBUTING.md** -- Create at project root with:
```markdown
# Contributing to x402 Cardano Facilitator

## Development Setup

### Prerequisites
- Node.js 20+
- pnpm 10.8+
- Docker and Docker Compose

### Getting Started
1. Fork and clone the repository
2. `pnpm install`
3. `pnpm docker:up` (starts Redis)
4. `cp config/config.example.json config/config.json` (configure Blockfrost + seed phrase)
5. `pnpm dev` (start dev server)

### Commands
| Command | Description |
|---------|-------------|
| `pnpm dev` | Start dev server with hot reload |
| `pnpm build` | Build with tsup |
| `pnpm test` | Run all tests |
| `pnpm test:coverage` | Run tests with coverage |
| `pnpm lint` | Run ESLint |
| `pnpm typecheck` | TypeScript type checking |

## Coding Standards

- **TypeScript strict mode** -- no `any` unless unavoidable
- **ESM-only** -- use `.js` extensions in imports
- **Zod validation** on all external inputs
- **Semicolons enabled** (Airbnb style)
- Pre-commit hooks run lint + typecheck automatically

## Pull Request Process

1. Create a feature branch from `main`
2. Make your changes with tests
3. Ensure `pnpm test`, `pnpm lint`, and `pnpm typecheck` all pass
4. Submit a PR with a clear description of changes
5. CI must pass before merge

## Code of Conduct

Be respectful. Focus on constructive feedback. We're all here to build.
```

**SECURITY.md** -- Create at project root following the template from research:
```markdown
# Security Policy

## Supported Versions

| Version | Supported |
|---------|-----------|
| 1.x.x  | Yes       |

## Reporting a Vulnerability

If you discover a security vulnerability in x402-fac, please report it responsibly.

**Do NOT open a public GitHub issue for security vulnerabilities.**

### How to Report

1. Email: [create a GitHub security advisory](https://github.com/YOUR_USERNAME/x402-fac/security/advisories/new) (preferred)
2. Include:
   - Description of the vulnerability
   - Steps to reproduce
   - Potential impact
   - Suggested fix (if any)

### Response Timeline

- **Acknowledgment:** Within 48 hours
- **Initial assessment:** Within 5 business days
- **Fix timeline:** Depends on severity

### Disclosure Policy

We follow coordinated disclosure:
1. Confirm the vulnerability
2. Develop and test a fix
3. Release the fix
4. Credit the reporter (unless they prefer anonymity)
5. Publicly disclose after the fix is available

## Scope

This policy covers the x402-fac repository and its published npm packages.

## Known Security Properties

- Blockfrost API keys are never logged or exposed in error responses
- All inputs validated with Zod schemas
- Rate limiting on all public endpoints (configurable)
- Request body size limits (50KB default, 10MB for uploads)
- Production Docker image runs as non-root user
- Redis authentication supported and recommended for production
- Transaction deduplication prevents double-settlement (SHA-256 + Redis SET NX)
- 10-step verification pipeline catches malformed, expired, and invalid transactions
```

Also update `package.json` license field from `"ISC"` to `"Apache-2.0"` -- read package.json first, then update only the license field.
  </action>
  <verify>
  `ls -la LICENSE CONTRIBUTING.md SECURITY.md` -- all three files exist. `grep "Apache" LICENSE` returns matches. `grep "ISC" package.json` returns no matches (license updated to Apache-2.0).
  </verify>
  <done>LICENSE (Apache-2.0), CONTRIBUTING.md, and SECURITY.md created. package.json license updated.</done>
</task>

</tasks>

<verification>
1. README.md exists with Quick Start, API Reference, SDK section
2. LICENSE contains Apache-2.0 full text
3. CONTRIBUTING.md contains dev setup and PR process
4. SECURITY.md contains responsible disclosure process
5. package.json license field is "Apache-2.0"
6. No real API keys or secrets in any file
</verification>

<success_criteria>
- A developer reading only the README can go from zero to running server in 5 steps
- All four governance files present at project root
- License matches upstream x402 protocol (Apache-2.0)
- SECURITY.md provides clear vulnerability reporting path
</success_criteria>

<output>
After completion, create `.planning/phases/09-documentation-publishing/09-02-SUMMARY.md`
</output>
